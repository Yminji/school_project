<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.path">
	<resultMap id="pathResult" type="pathVO">
		<result property="numNO" column="numNO"/>
		<result property="regNO" column="regNO"/>
		<result property="member_id" column="member_id"/>  
		<result property="start_date" column="start_date"/>
		<result property="end_date" column="end_date"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
	</resultMap>
	<resultMap id="mapResult" type="mapVO">
		<result property="latitude" column="latitude"/>
		<result property="longitude" column="longitude"/>
		<result property="placeName" column="placeName"/>
		<result property="member_id" column="member_id"/>
		<result property="regNO" column="regNO"/>
	</resultMap>
	<select id="selectPathList" resultMap="pathResult" parameterType="pathVO">
		<![CDATA[
			select *
			from t_plan
			where member_id = #{member_id}
			order by numNO
		]]>
	</select>
	
	<select id="selectMapList" resultMap="mapResult" parameterType="mapVO">
		<![CDATA[
			select *
			from map
			where member_id = #{member_id}
			order by regNO
		]]>
	</select>
	
	<select id="selectDetailList" resultMap="pathResult" parameterType="pathVO">
		<![CDATA[
			select *
			from t_plan
			where member_id = #{member_id}
			order by numNO
		]]>
	</select>
	
	<insert id="insertPath" parameterType="mapVO">
		<![CDATA[
			insert into map(member_id, regNO, latitude, longitude, placeName)
			values(#{member_id}, #{regNO}, #{latitude}, #{longitude}, #{placeName} )
		]]>
	</insert>
	
	<insert id="insertNewArticle"  parameterType="java.util.Map">
		<![CDATA[
			INSERT into t_plan(member_id, numNO, latitude, longitude, placeName, title, content)
			values(#{member_id}, #{regNO}, #{latitude}, #{longitude}, #{placeName}, #{title}, #{content} )
		]]>      
	</insert>
	
	<select id="selectNewNumNO" resultType="int"  >
		<![CDATA[
			SELECT  nvl(max(numNO), 0) + 1 from t_plan		
		]]>
	</select>
	
	<select id="insertNumNO" resultType="int"  >
		<![CDATA[
			SELECT  nvl(max(numNO), 0) + 1 from t_plan		
		]]>
	</select>
	
	<!-- <update id="updateArticle"  parameterType="java.util.Map">
			update t_plan
			set title=#{title},	 
			content=#{content}
			where numNO=#{numNO}
	</update> -->
	
	<delete id="deletePath" parameterType="int">
		<![CDATA[
			delete from t_plan where regNO = #{regNO}
		]]>
	</delete> 
	
	<delete id="deleteMap" parameterType="int">
		<![CDATA[
			delete from map where regNO = #{regNO}
		]]>
	</delete> 
	
	<select id="selectMaxPlaceId" resultType="int">
		<![CDATA[
			select nvl(max(regNO), 0) +1 from map
		]]>
	</select>
	
	<select id="selectNewArticleNO" resultType="int"  >
		<![CDATA[
			SELECT  nvl(max(numNO), 0) + 1 from t_plan		
		]]>
	</select>
</mapper>